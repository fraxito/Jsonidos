<!DOCTYPE html>
<html>
    <head>
        <title>JVideos!</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="theme-color" content="#000000">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-title" content="iSonidos">
        <link rel="apple-touch-icon" href="./apple-touch-icon.png">
        <link rel="manifest" href="./manifest.json">
        <style>
      @import url(https://fonts.googleapis.com/css?family=Open+Sans);
.btn { display: inline-block;  zoom: 1;  margin-bottom: 0; font-size: 14px; line-height: 13px; color: #333333; text-align: center;text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75); vertical-align: middle; background-color: #f5f5f5; background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6); background-image: -ms-linear-gradient(top, #ffffff, #e6e6e6); background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6)); background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6); background-image: -o-linear-gradient(top, #ffffff, #e6e6e6); background-image: linear-gradient(top, #ffffff, #e6e6e6); background-repeat: repeat-x; filter: progid:dximagetransform.microsoft.gradient(startColorstr=#ffffff, endColorstr=#e6e6e6, GradientType=0); border-color: #e6e6e6 #e6e6e6 #e6e6e6; border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25); border: 1px solid #e6e6e6; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05); -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05); box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05); cursor: pointer; margin-left: .3em; }
.btn:hover, .btn:active, .btn.active, .btn.disabled, .btn[disabled] { background-color: #e6e6e6; }
.btn-large { padding: 9px 3px; font-size: 25px; line-height: normal; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; }
.btn:hover { color: #333333; text-decoration: none; background-color: #e6e6e6; background-position: 0 -15px; -webkit-transition: background-position 0.1s linear; -moz-transition: background-position 0.1s linear; -ms-transition: background-position 0.1s linear; -o-transition: background-position 0.1s linear; transition: background-position 0.1s linear; }
.btn-primary, .btn-primary:hover { text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25); color: #ffffff; }
.btn-primary.active { color: rgba(255, 255, 255, 0.75); }
.btn-primary { background-color: #113342; background-image: -moz-linear-gradient(top, #113342, #113342); background-image: -ms-linear-gradient(top, #113342, #113342); background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#113342), to(#113342)); background-image: -webkit-linear-gradient(top, #113342, #113342); background-image: -o-linear-gradient(top, #113342, #113342); background-image: linear-gradient(top, #113342, #113342); background-repeat: repeat-x; filter: progid:dximagetransform.microsoft.gradient(startColorstr=#51565a, endColorstr=#51565a, GradientType=0);  border: 1px solid #3762bc; text-shadow: 1px 1px 1px rgba(0,0,0,0.4); box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.5); }
.btn-primary:hover, .btn-primary:active, .btn-primary.active, .btn-primary.disabled, .btn-primary[disabled] { filter: none; background-color: #51565a; }
.btn-block { width: 100%; display:block; }

.btn-sonido { text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25); color: #ffffff; }
.btn-sonido.active { color: rgba(255, 255, 255, 0.75); }
.btn-sonido { background-color: #51565a; background-image: -moz-linear-gradient(top, #51565a, #51565a); background-image: -ms-linear-gradient(top, #51565a, #51565a); background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#51565a), to(#51565a)); background-image: -webkit-linear-gradient(top, #51565a, #51565a); background-image: -o-linear-gradient(top, #51565a, #51565a); background-image: linear-gradient(top, #51565a, #51565a); background-repeat: repeat-x; filter: progid:dximagetransform.microsoft.gradient(startColorstr=#51565a, endColorstr=#51565a, GradientType=0);  border: 1px solid #3762bc; text-shadow: 1px 1px 1px rgba(0,0,0,0.4); box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.5); }
.btn-sonido:active, .btn-sonido.active, .btn-sonido.disabled, .btn-sonido[disabled] { filter: none; background-color: #51565a; }
.form-control-mobile{     display: block;width: 100%;padding: 1rem;font-size: 2rem;font-weight: 400;
    line-height: 1.5;color: #212529;background-color: #fff; background-clip: padding-box; border: 1px solid #ced4da;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: 0.375rem;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out
}
.form-control{     display: block; padding: 0.375rem 0.75rem;font-size: 1rem;font-weight: 400;
    line-height: 1.5;color: #212529;background-color: #fff; background-clip: padding-box; border: 1px solid #ced4da;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: 0.375rem;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out
}
.btn-verde { color:greenyellow; border:2px solid; border-color: greenyellow;}

/* Estilos para el men√∫ de compartir */
.share-menu {
    position: fixed;
    background: rgba(0, 0, 0, 0.9);
    border: 2px solid #51565a;
    border-radius: 10px;
    padding: 10px;
    z-index: 1000;
    display: none;
    min-width: 200px;
}

.share-menu button {
    display: block;
    width: 100%;
    margin: 5px 0;
    padding: 10px;
    background: #51565a;
    color: white;
    border: 1px solid #3762bc;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
}

.share-menu button:hover {
    background: #3762bc;
}

.share-menu .close-btn {
    background: #d32f2f;
    border-color: #b71c1c;
}

.share-menu .close-btn:hover {
    background: #b71c1c;
}

    </style>
    
    </head>
    <body style="height: 200%; scrollHeight: 4000px; min-height: 4000px; background-color: black; overflow: auto;">
        
        <video playsinline height="400"  style="position: fixed;top:40px;left: 50%;transform: translate(-50%,0%);" >
            <source  type="video/mp4">
          Your browser does not support the video tag.
          
        </video>
        <audio class="audio" id="sonidosaudio" controls preload="none" style="display: none"> 
            <source  type="audio/mpeg">
       </audio>
        
        <!-- Men√∫ de compartir -->
        <div id="shareMenu" class="share-menu">
            <button id="shareWhatsApp">üì± Compartir por WhatsApp</button>
            <button id="shareWeb">üîó Compartir (Web Share API)</button>
            <button id="copyLink">üìã Copiar enlace</button>
            <button id="downloadFile">üíæ Descargar archivo</button>
            <button class="close-btn" id="closeShareMenu">‚ùå Cerrar</button>
        </div>
        
        <div style="position: fixed;left: 50%;transform: translate(-50%,0%);">
            <input id="cajaBusqueda" type="text"  class="form-control" placeholder="buscar" onkeyup="busca();">
        </div>
        <div id="botones" class="context"></div>
    <script>
        document.getElementById("cajaBusqueda").addEventListener("input", busca, false);

        const isMobile = true;//navigator.userAgentData.mobile; //resolves true/false
        
        var videos = ['v_simpsons_multiplicara_cabeza.mp4','v_no_alergico_gilipolleces.mp4','v_no_work_hard.mp4','v_no_emotional_damage.mp4','v_simpsons_patopatopato.mp4','v_no_compaltan.mp4','v_simpsons_callaos_hipoglucidos.mp4','v_no_a_mi_me_encanta.mp4','v__Brasil02.mp4','v__Brasil01.mp4','v_agora_si_entiendo.mp4', '__pilotes.mp4','__its_friday_then.mp4','v_simpsons_cojo_otro_muelle.mp4','v_simpsons_dinero_bienes_servicios.mp4','v_simpsons_patatas_fritas.mp4','v_simpsons_punteo_guitarra.mp4','v_simpsons_ninito_tullido.mp4','v_simpsons_quien_es_ese_tio.mp4','v_simpsons_No_le_corrijas_Brut.mp4','v_simpsons_eh_sabio_mas_despacio.mp4','v_simpsons_en_teoria_comunismo.mp4','v_simpsons_yo_me_voy_por_mi_izquierda.mp4','v_simpsons_rollo_de_curro.mp4','v_simpsons_no_se_oye.mp4','v_simpsons_excelente.mp4','v_simpsons_ganas_de_matar.mp4','v_simpsons_un_dinosaurio.mp4','v_simpsons_dabuten_madam.mp4','v_simpsons_donde_esta_mi_tab.mp4','v_simpsons_gorra_de_gordo.mp4','v_simpsons_sufrir_accidente.mp4','v_simpsons_miau_miau_miau.mp4','v_no_cumbia_Avengers.mp4', 'v_no_pimpam_trucutrucu.mp4','v_no_are_you_running.mp4','v_no_mas_vida_que_mi_tio.mp4','v_simpsons_ordenador_mata_flanders.mp4','v_simpsons_corre_platano.mp4','v_simpsons_seymour_mariquita.mp4','v_simpsons_vicepresidente_ejecutivo.mp4','v_no_que_te_avian.mp4','v_simpsons_5_fases_duelo.mp4','v_simpsons_a_fregar.mp4','v_simpsons_batman.mp4','v_simpsons_como_los_perdedores.mp4','v_simpsons_cosas_divertidas.mp4','v_simpsons_dale_un_besito_a_lo_que_se_mueve.mp4','v_simpsons_dejar_la_cerveza.mp4','v_simpsons_desde_que_era_chiquitin.mp4','v_simpsons_doy_el_callo_por_dinero.mp4','v_simpsons_ese_perro_ha_robado_un_jamon.mp4','v_simpsons_fin_de_semana_gratuito.mp4','v_simpsons_giliiiii.mp4','v_simpsons_hipotenusa.mp4','v_simpsons_homer_estrellao.mp4','v_simpsons_homer_no_funciona_con_no_cerveza.mp4','v_simpsons_la_caja_la_caja.mp4','v_simpsons_la_cosa_es_quejarse.mp4','v_simpsons_la_policia_no_sabia_asuntos_internos.mp4','v_simpsons_la_tonta_esta_en_el_bote.mp4','v_simpsons_lisa_3_metros.mp4','v_simpsons_mejor_que_ir_al_trabajo.mp4','v_simpsons_mojo_niaaaa.mp4','v_simpsons_mojo_niaaaa2.mp4','v_simpsons_mojo_pato.mp4','v_simpsons_mojo_residencia_simpsons.mp4','v_simpsons_mojo_territorio.mp4','v_simpsons_mojo_zumo.mp4','v_simpsons_mono_de_jade.mp4','v_simpsons_por_el_alcohol.mp4','v_simpsons_que_listo_soy_yo.mp4','v_simpsons_quiero_mi_bocadillo.mp4','v_simpsons_siii_siiiiii.mp4','v_simpsons_vives_en_el_pasado.mp4','v_simpsons_votos_a_favor.mp4','v_simpsons_yuhuu_soy_universitario.mp4','v_simpsons_pringaos_de_la_autopista.mp4','v_slapchop_5_segundos_y_listo.mp4','v_slapchop_fetuchini_bikini.mp4','v_slapchop_mira_mi_huevo.mp4','v_slapchop_no_es_bueno.mp4','v_slapchop_odias_hacer_ensaladas.mp4','v_slapchop_te_cuesta_un_dolar.mp4','v_slapchop_te_va_a_fascinar.mp4','v_slapchop_tu_vida_esta_mas_excitante.mp4','v_no_grandmother_run_faster.mp4','v_no_old_doritos.mp4'];
        var sonidos = ['s_n_cocacolanormal.mp3','s_n_cocacolanormal_largo.mp3','s_no_el_diablo.mp3','s_no_el_diablo_micho.mp3','s_no_pump_up_the_jam.mp3','s_no_cant_touch_this.mp3','_victor_toma_mango.mp3','_victor_mosca.mp3','_victor_desayuna_con_huevo.mp3','_victor_montate_en_mi_motora.mp3','__1812_Obertura.mp3','__aleluya.mp3','s_es_mejor_eso_que_morirse.mp3','__avengers.mp3','__Directed_by_Robert_B_ Weide.mp3','s_no_ya entiendo lo que me quieres decir.mp3','__morty.mp3','__hello_darkness.mp3','__say_something.mp3','s_no_willyrex.mp3','__a_tomar_pol_culo_todos.mp3','__bites_the_dust.mp3','__callas.mp3','__dakota.mp3','__inflar.mp3','__maricarmen.mp3','__me_da_igual.mp3','__oh_ma_gawd.mp3','__parda.mp3','__porque.mp3','__que_me_quedo_sin_comer.mp3','__siuuu.mp3','__tengo_miedo.mp3','__thug_life.mp3','__turn_down.mp3','__trata_de_arrancarlo1.mp3','__trata_de_arrancarlo2.mp3','__yvolo.mp3','__yvolo2.mp3','__yvolo3.mp3','_chiquito_ahora.mp3','_chiquito_cobarde.mp3','_chiquito_gloria.mp3','_chiquito_lucas.mp3','_chiquito_muymal.mp3','_chiquito_noorl.mp3','_chiquito_nopuedo01.mp3','_chiquito_nopuedo02.mp3','_chiquito_por_favorl.mp3','_chiquito_quietorl.mp3','_pedrerol_becarios1.mp3','_pedrerol_becarios2.mp3','_pedrerol_ya_esta_bien.mp3','_rajoy_los_chuches_iva.mp3','_rajoy_pollo.mp3','_rajoy_por_favor_callense.mp3','_rajoy_tila.mp3','_rajpy_yo_te_quiero_alfonso.mp3','_ramonpitis_5_cosas.mp3','_ramonpitis_emidiotuchi.mp3','_ramonpitis_inestable.mp3','_ramonpitis_orejudo.mp3','_ramonpitis_pin_pam_pin.mp3','_ramonpitis_punetazos.mp3','_ramonpitis_vanidoso.mp3','_simpsons_corre_platano.mp3','_simpsons_incognito.mp3','_simpsons_klab01.mp3','_simpsons_klab02.mp3','_torrente_plan_perfecto.mp3'];
        var v = document.getElementsByTagName("video")[0];
        var a = document.getElementsByTagName("audio")[0];
        var s = document.getElementsByTagName("source")[0];
        var s2 = document.getElementsByTagName("source")[1];
        var posicionX=0;
        var posicionY=-50;
        var ancho = 110;
        var alto = 44;
        var columnas = 11;
        var inicioX = document.documentElement.clientWidth  - (ancho*columnas) ; // window.screen.width
        var inicioY = 10;
        
        // Variables para el sistema de compartir
        let currentShareFile = '';
        let currentShareType = '';
        let longPressTimer = null;
        let isLongPress = false;
        
        if (isMobile){
            document.getElementById("cajaBusqueda").classList.remove("form-control");
            document.getElementById("cajaBusqueda").classList.add("form-control-mobile");
            posicionX=0;
            posicionY=350;
            columnas = 6;
            ancho = (document.documentElement.clientWidth / columnas) -1;
            alto = 80;
            inicioX = 40; //document.documentElement.clientWidth  - (ancho*columnas) ; // window.screen.width
            inicioY = 40;
            cargaVideosMobile();
            cargaSonidosMobile();
        }else{
            cargaVideos();
            cargaSonidos();
        }
       
        function cargaVideos(){
            posicionX=inicioX/2; 
            for (var i=0; i< videos.length; i++){
               (function (i){
                var btn = document.createElement("BUTTON");
                var t = document.createTextNode( soloNombreCancion(videos[i]));
                btn.setAttribute("class","btn btn-primary");
                if (i < 54){
                    if ((i%6)==0){posicionX = inicioX/2;posicionY += 50;}
                    if ((i%6)==1){posicionX += ancho ;}
                    if ((i%6)==2){posicionX += ancho;}
                    if ((i%6)==3){posicionX += 6*ancho ;}
                    if ((i%6)==4){posicionX += ancho;}
                    if ((i%6)==5){posicionX += ancho ;}
                }
                else {
                    posicionX= (i%columnas)*ancho + inicioX/2;
                    if ( i%columnas==0){posicionY += 50;} 
                }
                btn.setAttribute("style","height:"+alto+"px;width:"+ancho+"px; max-width:"+ancho+"px;position:fixed;left:"+posicionX+"px;top:"+posicionY+"px;");
                btn.appendChild(t);
                
                // Evento click normal
                btn.onclick = function (event) {
                    if (!isLongPress) {
                        s.setAttribute('src', 'pelis/'+videos[i]);
                        v.load();
                        v.play();
                    }
                    isLongPress = false;
                }
                
                // Eventos para long press
                btn.onmousedown = btn.ontouchstart = function(event) {
                    isLongPress = false;
                    longPressTimer = setTimeout(() => {
                        isLongPress = true;
                        const rect = btn.getBoundingClientRect();
                        showShareMenu(rect.left + rect.width/2, rect.top + rect.height, videos[i], 'pelis');
                        event.preventDefault();
                    }, 500);
                }
                
                btn.onmouseup = btn.ontouchend = btn.onmouseleave = function() {
                    clearTimeout(longPressTimer);
                }
                
                document.getElementById('botones').appendChild(btn);
                })(i);
            }
        }
        function cargaSonidos(){
            var numVideos= videos.length;
            for (var i=numVideos; i< sonidos.length + numVideos; i++){
               (function (i){
                var btn = document.createElement("BUTTON");
                var t = document.createTextNode( soloNombreCancion(sonidos[i-numVideos]));
                btn.setAttribute("class","btn btn-sonido");
                posicionX= (i%columnas)*ancho + inicioX/2;
                //posicionY = Math.trunc((i/columnas)) * 50 + inicioY;
                if ( i%columnas==0){posicionY += 50; } 
                btn.setAttribute("style","height:"+alto+"px;width:"+ancho+"px; max-width:"+ancho+"px;position:fixed;left:"+posicionX+"px;top:"+posicionY+"px;");
                btn.appendChild(t);
                
                // Evento click normal
                btn.onclick = function (event) {
                    if (!isLongPress) {
                        s.setAttribute('src', 'sonidos/'+sonidos[i-numVideos]);
                        v.load();
                        v.play();
                    }
                    isLongPress = false;
                }
                
                // Eventos para long press
                btn.onmousedown = btn.ontouchstart = function(event) {
                    isLongPress = false;
                    longPressTimer = setTimeout(() => {
                        isLongPress = true;
                        const rect = btn.getBoundingClientRect();
                        showShareMenu(rect.left + rect.width/2, rect.top + rect.height, sonidos[i-numVideos], 'sonidos');
                        event.preventDefault();
                    }, 500);
                }
                
                btn.onmouseup = btn.ontouchend = btn.onmouseleave = function() {
                    clearTimeout(longPressTimer);
                }
                
                document.getElementById('botones').appendChild(btn);
                })(i);
            }
        }
        
        function soloNombreCancion (_nombreLargo){
            var nombreVideo = _nombreLargo.split(".")[0];
            nombreVideo = nombreVideo.split("_");
            nombreVideo = nombreVideo.slice(2);
            var titulo="";
            for (var i=0; i< nombreVideo.length; i++){
                titulo = titulo +" "+nombreVideo[i];
            }
            return titulo;
        }
        function cargaVideosMobile(){
            for (var i=0; i< videos.length; i++){
               (function (i){
                var btn = document.createElement("BUTTON");
                var t = document.createTextNode( soloNombreCancion(videos[i]));
                btn.setAttribute("class","btn btn-primary btn-large");
                posicionX= (i%columnas)*ancho + inicioX/2;
                if ( i%columnas==0){posicionY += 100;} 
                
                btn.setAttribute("style","height:"+alto+"px;width:"+ancho+"px; max-width:"+ancho+"px;position:absolute;left:"+posicionX+"px;top:"+posicionY+"px;");
                btn.appendChild(t);
                
                // Evento click normal
                btn.onclick = function (event) {
                    if (!isLongPress) {
                        s.setAttribute('src', 'pelis/'+videos[i]);
                        v.load();
                        v.play();
                    }
                    isLongPress = false;
                }
                
                // Eventos para long press
                btn.onmousedown = btn.ontouchstart = function(event) {
                    isLongPress = false;
                    longPressTimer = setTimeout(() => {
                        isLongPress = true;
                        const rect = btn.getBoundingClientRect();
                        showShareMenu(rect.left + rect.width/2, rect.top + rect.height, videos[i], 'pelis');
                        event.preventDefault();
                    }, 500);
                }
                
                btn.onmouseup = btn.ontouchend = btn.onmouseleave = function() {
                    clearTimeout(longPressTimer);
                }
                
                document.getElementById('botones').appendChild(btn);
                })(i);
            }
        }
            
    function cargaSonidosMobile(){
            var numVideos= videos.length;
            for (var i=numVideos; i< sonidos.length + numVideos; i++){
               (function (i){
                var btn = document.createElement("BUTTON");
                var t = document.createTextNode( soloNombreCancion(sonidos[i-numVideos]));
                btn.setAttribute("class","btn btn-sonido btn-large");
                posicionX= (i%columnas)*ancho + inicioX/2;
                if ( i%columnas==0){posicionY += 100; } 
                btn.setAttribute("style","height:"+alto+"px;width:"+ancho+"px; max-width:"+ancho+"px;position:absolute;left:"+posicionX+"px;top:"+posicionY+"px;");
                btn.appendChild(t);
                
                // Evento click normal
                btn.onclick = function (event) {
                    if (!isLongPress) {
                        s2.setAttribute('src', 'sonidos/'+sonidos[i-numVideos]);
                        a.load();
                        a.play();
                    }
                    isLongPress = false;
                }
                
                // Eventos para long press
                btn.onmousedown = btn.ontouchstart = function(event) {
                    isLongPress = false;
                    longPressTimer = setTimeout(() => {
                        isLongPress = true;
                        const rect = btn.getBoundingClientRect();
                        showShareMenu(rect.left + rect.width/2, rect.top + rect.height, sonidos[i-numVideos], 'sonidos');
                        event.preventDefault();
                    }, 500);
                }
                
                btn.onmouseup = btn.ontouchend = btn.onmouseleave = function() {
                    clearTimeout(longPressTimer);
                }
                
                document.getElementById('botones').appendChild(btn);
                })(i);
            }
        }    
   
    
//registra el serviceworker que se encarga de manejar el progresive web app 
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('./swcnd.js').then(function(registration) {
            //// Registration was successful
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
          }, function(err) {
            //// registration failed :(
            console.log('ServiceWorker registration failed: ', err);
          });
        });
      }
    
    ///la caja de b√∫squeda
    function busca(){
        var texto = document.getElementById("cajaBusqueda").value.toLowerCase();
        var buttons = document.querySelectorAll(".btn");
        var encontrado = 0;
        if (texto.length > 2){
            buttons.forEach(button => {
                if (button.textContent.includes(texto)){
                    button.classList.add("btn-verde");
                    if (encontrado == 0 && isMobile){
                        encontrado = 1;
                        button.scrollIntoView();
                    }
                }
                else{
                    button.classList.remove("btn-verde");
                }
            });
        }
        else{
            buttons.forEach(button => {
                button.classList.remove("btn-verde");
            });            
        }
    }

    // Funciones para el sistema de compartir
    function showShareMenu(x, y, fileName, fileType) {
        currentShareFile = fileName;
        currentShareType = fileType;
        
        const shareMenu = document.getElementById('shareMenu');
        shareMenu.style.display = 'block';
        shareMenu.style.left = Math.min(x, window.innerWidth - 220) + 'px';
        shareMenu.style.top = Math.min(y, window.innerHeight - 200) + 'px';
        
        // Ocultar el men√∫ si no es compatible con Web Share API
        const webShareBtn = document.getElementById('shareWeb');
        if (navigator.share) {
            webShareBtn.style.display = 'block';
        } else {
            webShareBtn.style.display = 'none';
        }
    }

    function hideShareMenu() {
        document.getElementById('shareMenu').style.display = 'none';
        currentShareFile = '';
        currentShareType = '';
    }

    async function shareViaWhatsApp() {
        const baseUrl = window.location.href.replace('index.html', '');
        const fileUrl = baseUrl + currentShareType + '/' + currentShareFile;
        const fileName = soloNombreCancion(currentShareFile);
        const text = `¬°Escucha este ${currentShareType === 'sonidos' ? 'sonido' : 'video'} de iSonidos! üéµ\n"${fileName}"\n${fileUrl}`;
        
        const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(text)}`;
        window.open(whatsappUrl, '_blank');
        hideShareMenu();
    }

    async function shareViaWebAPI() {
        if (navigator.share) {
            try {
                const baseUrl = window.location.href.replace('index.html', '');
                const fileUrl = baseUrl + currentShareType + '/' + currentShareFile;
                const fileName = soloNombreCancion(currentShareFile);
                
                await navigator.share({
                    title: 'iSonidos - ' + fileName,
                    text: `¬°Mira este ${currentShareType === 'sonidos' ? 'sonido' : 'video'} de iSonidos!`,
                    url: fileUrl
                });
            } catch (err) {
                console.log('Error al compartir:', err);
            }
        }
        hideShareMenu();
    }

    async function copyToClipboard() {
        const baseUrl = window.location.href.replace('index.html', '');
        const fileUrl = baseUrl + currentShareType + '/' + currentShareFile;
        const fileName = soloNombreCancion(currentShareFile);
        const text = `iSonidos - "${fileName}": ${fileUrl}`;
        
        try {
            await navigator.clipboard.writeText(text);
            alert('¬°Enlace copiado al portapapeles! üìã');
        } catch (err) {
            // Fallback para navegadores que no soporten clipboard API
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                alert('¬°Enlace copiado al portapapeles! üìã');
            } catch (err) {
                alert('No se pudo copiar el enlace');
            }
            document.body.removeChild(textArea);
        }
        hideShareMenu();
    }

    function downloadFile() {
        const baseUrl = window.location.href.replace('index.html', '');
        const fileUrl = baseUrl + currentShareType + '/' + currentShareFile;
        
        const link = document.createElement('a');
        link.href = fileUrl;
        link.download = currentShareFile;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        hideShareMenu();
    }

    // Event listeners para el men√∫ de compartir
    document.getElementById('shareWhatsApp').addEventListener('click', shareViaWhatsApp);
    document.getElementById('shareWeb').addEventListener('click', shareViaWebAPI);
    document.getElementById('copyLink').addEventListener('click', copyToClipboard);
    document.getElementById('downloadFile').addEventListener('click', downloadFile);
    document.getElementById('closeShareMenu').addEventListener('click', hideShareMenu);

    // Cerrar men√∫ si se hace clic fuera de √©l
    document.addEventListener('click', function(event) {
        const shareMenu = document.getElementById('shareMenu');
        if (!shareMenu.contains(event.target) && shareMenu.style.display === 'block') {
            hideShareMenu();
        }
    });

    </script>
    
      </body>
</html>
